benchmarks:
  default_all_noise_params:
    features:
      pose_vectors: 2
      hsv: 0.1
      principal_curvatures_log: 0.1
      pose_fully_defined: 0.01
    location: 0.002
  default_sensor_features:
  - pose_vectors
  - pose_fully_defined
  - on_object
  - hsv
  - principal_curvatures_log
  min_eval_steps: 20
  pretrained_dir: ${path.expanduser:${oc.env:MONTY_MODELS}/pretrained_ycb_v11}
  rotations_all_count: 14
  rotations_all:
  - - 0
    - 0
    - 0
  - - 0
    - 90
    - 0
  - - 0
    - 180
    - 0
  - - 0
    - 270
    - 0
  - - 90
    - 0
    - 0
  - - 90
    - 180
    - 0
  - - 35
    - 45
    - 0
  - - 325
    - 45
    - 0
  - - 35
    - 315
    - 0
  - - 325
    - 315
    - 0
  - - 35
    - 135
    - 0
  - - 325
    - 135
    - 0
  - - 35
    - 225
    - 0
  - - 325
    - 225
    - 0
  rotations_3_count: 3
  rotations_3:
  - - 0
    - 0
    - 0
  - - 0
    - 90
    - 0
  - - 0
    - 180
    - 0
experiment:
  config:
    do_train: false
    do_eval: true
    show_sensor_output: false
    max_train_steps: 1000
    max_eval_steps: 500
    max_total_steps: 6000
    n_train_epochs: 3
    n_eval_epochs: 1
    model_name_or_path: ${benchmarks.pretrained_dir}/supervised_pre_training_5lms_all_objects/pretrained/
    min_lms_match: 3
    seed: 42
    supervised_lm_ids: []
    python_log_level: DEBUG
    logging:
      monty_log_level: BASIC
      monty_handlers:
      - ${monty.class:tbp.monty.frameworks.loggers.monty_handlers.BasicCSVStatsHandler}
      - ${monty.class:tbp.monty.frameworks.loggers.monty_handlers.ReproduceEpisodeHandler}
      wandb_handlers:
      - ${monty.class:tbp.monty.frameworks.loggers.wandb_handlers.BasicWandbTableStatsHandler}
      - ${monty.class:tbp.monty.frameworks.loggers.wandb_handlers.BasicWandbChartStatsHandler}
      python_log_level: WARNING
      python_log_to_file: true
      python_log_to_stderr: true
      output_dir: ${path.expanduser:${oc.env:MONTY_LOGS}/projects/monty_runs}
      run_name: randrot_noise_77obj_5lms_dist_agent
      resume_wandb_run: false
      wandb_id:
        _target_: wandb.util.generate_id
      wandb_group: benchmark_experiments
    monty_config:
      sensor_module_configs:
        sensor_module_0:
          sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.HabitatSM}
          sensor_module_args:
            sensor_module_id: patch_0
            features: ${benchmarks.default_sensor_features}
            save_raw_obs: false
            delta_thresholds:
              on_object: 0
              distance: 0.01
            noise_params: ${benchmarks.default_all_noise_params}
        sensor_module_1:
          sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.HabitatSM}
          sensor_module_args:
            sensor_module_id: patch_1
            features: ${benchmarks.default_sensor_features}
            save_raw_obs: false
            delta_thresholds:
              on_object: 0
              distance: 0.01
            noise_params: ${benchmarks.default_all_noise_params}
        sensor_module_2:
          sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.HabitatSM}
          sensor_module_args:
            sensor_module_id: patch_2
            features: ${benchmarks.default_sensor_features}
            save_raw_obs: false
            delta_thresholds:
              on_object: 0
              distance: 0.01
            noise_params: ${benchmarks.default_all_noise_params}
        sensor_module_3:
          sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.HabitatSM}
          sensor_module_args:
            sensor_module_id: patch_3
            features: ${benchmarks.default_sensor_features}
            save_raw_obs: false
            delta_thresholds:
              on_object: 0
              distance: 0.01
            noise_params: ${benchmarks.default_all_noise_params}
        sensor_module_4:
          sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.HabitatSM}
          sensor_module_args:
            sensor_module_id: patch_4
            features: ${benchmarks.default_sensor_features}
            save_raw_obs: false
            delta_thresholds:
              on_object: 0
              distance: 0.01
            noise_params: ${benchmarks.default_all_noise_params}
        sensor_module_5:
          sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.Probe}
          sensor_module_args:
            sensor_module_id: view_finder
            save_raw_obs: true
      motor_system_config:
        motor_system_args:
          policy_args:
            file_name: null
            good_view_percentage: 0.5
            desired_object_distance: 0.03
            use_goal_state_driven_actions: true
            switch_frequency: 1.0
            min_perc_on_obj: 0.25
            agent_id: ${monty.agent_id:agent_id_0}
            action_sampler_args:
              actions:
              - ${monty.class:tbp.monty.frameworks.actions.actions.LookUp}
              - ${monty.class:tbp.monty.frameworks.actions.actions.LookDown}
              - ${monty.class:tbp.monty.frameworks.actions.actions.TurnLeft}
              - ${monty.class:tbp.monty.frameworks.actions.actions.TurnRight}
              - ${monty.class:tbp.monty.frameworks.actions.actions.SetAgentPose}
              - ${monty.class:tbp.monty.frameworks.actions.actions.SetSensorRotation}
              rotation_degrees: 5.0
            action_sampler_class: ${monty.class:tbp.monty.frameworks.actions.action_samplers.ConstantSampler}
          policy_class: ${monty.class:tbp.monty.frameworks.models.motor_policies.InformedPolicy}
        motor_system_class: ${monty.class:tbp.monty.frameworks.models.motor_system.MotorSystem}
      monty_args:
        num_exploratory_steps: 1000
        min_eval_steps: ${benchmarks.min_eval_steps}
        min_train_steps: 3
        max_total_steps: 2500
      monty_class: ${monty.class:tbp.monty.frameworks.models.evidence_matching.model.MontyForEvidenceGraphMatching}
      learning_module_configs:
        learning_module_0:
          learning_module_args:
            feature_weights:
              patch:
                hsv: ${np.array:[1, 0.5, 0.5]}
                pose_vectors: ${np.ones:3}
                principal_curvatures_log: ${np.ones:2}
            tolerances:
              patch:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
              patch_0:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
            max_match_distance: 0.01
            x_percent_threshold: 20
            evidence_threshold_config: 80%
            max_graph_size: 0.3
            num_model_voxels_per_dim: 100
            gsg_class: ${monty.class:tbp.monty.frameworks.models.goal_state_generation.EvidenceGoalStateGenerator}
            gsg_args:
              goal_tolerances:
                location: 0.015
              elapsed_steps_factor: 10
              min_post_goal_success_steps: 5
              x_percent_scale_factor: 0.75
              desired_object_distance: 0.03
            hypotheses_updater_args:
              max_nneighbors: 10
          learning_module_class: ${monty.class:tbp.monty.frameworks.models.evidence_matching.learning_module.EvidenceGraphLM}
          tolerances: null
        learning_module_1:
          learning_module_args:
            feature_weights:
              patch:
                hsv: ${np.array:[1, 0.5, 0.5]}
                pose_vectors: ${np.ones:3}
                principal_curvatures_log: ${np.ones:2}
            tolerances:
              patch:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
              patch_1:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
            max_match_distance: 0.01
            x_percent_threshold: 20
            evidence_threshold_config: 80%
            max_graph_size: 0.3
            num_model_voxels_per_dim: 100
            gsg_class: ${monty.class:tbp.monty.frameworks.models.goal_state_generation.EvidenceGoalStateGenerator}
            gsg_args:
              goal_tolerances:
                location: 0.015
              elapsed_steps_factor: 10
              min_post_goal_success_steps: 5
              x_percent_scale_factor: 0.75
              desired_object_distance: 0.03
            hypotheses_updater_args:
              max_nneighbors: 10
          learning_module_class: ${monty.class:tbp.monty.frameworks.models.evidence_matching.learning_module.EvidenceGraphLM}
          tolerances: null
        learning_module_2:
          learning_module_args:
            feature_weights:
              patch:
                hsv: ${np.array:[1, 0.5, 0.5]}
                pose_vectors: ${np.ones:3}
                principal_curvatures_log: ${np.ones:2}
            tolerances:
              patch:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
              patch_2:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
            max_match_distance: 0.01
            x_percent_threshold: 20
            evidence_threshold_config: 80%
            max_graph_size: 0.3
            num_model_voxels_per_dim: 100
            gsg_class: ${monty.class:tbp.monty.frameworks.models.goal_state_generation.EvidenceGoalStateGenerator}
            gsg_args:
              goal_tolerances:
                location: 0.015
              elapsed_steps_factor: 10
              min_post_goal_success_steps: 5
              x_percent_scale_factor: 0.75
              desired_object_distance: 0.03
            hypotheses_updater_args:
              max_nneighbors: 10
          learning_module_class: ${monty.class:tbp.monty.frameworks.models.evidence_matching.learning_module.EvidenceGraphLM}
          tolerances: null
        learning_module_3:
          learning_module_args:
            feature_weights:
              patch:
                hsv: ${np.array:[1, 0.5, 0.5]}
                pose_vectors: ${np.ones:3}
                principal_curvatures_log: ${np.ones:2}
            tolerances:
              patch:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
              patch_3:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
            max_match_distance: 0.01
            x_percent_threshold: 20
            evidence_threshold_config: 80%
            max_graph_size: 0.3
            num_model_voxels_per_dim: 100
            gsg_class: ${monty.class:tbp.monty.frameworks.models.goal_state_generation.EvidenceGoalStateGenerator}
            gsg_args:
              goal_tolerances:
                location: 0.015
              elapsed_steps_factor: 10
              min_post_goal_success_steps: 5
              x_percent_scale_factor: 0.75
              desired_object_distance: 0.03
            hypotheses_updater_args:
              max_nneighbors: 10
          learning_module_class: ${monty.class:tbp.monty.frameworks.models.evidence_matching.learning_module.EvidenceGraphLM}
          tolerances: null
        learning_module_4:
          learning_module_args:
            feature_weights:
              patch:
                hsv: ${np.array:[1, 0.5, 0.5]}
                pose_vectors: ${np.ones:3}
                principal_curvatures_log: ${np.ones:2}
            tolerances:
              patch:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
              patch_4:
                hsv: ${np.array:[0.1, 0.2, 0.2]}
                principal_curvatures_log: ${np.ones:2}
            max_match_distance: 0.01
            x_percent_threshold: 20
            evidence_threshold_config: 80%
            max_graph_size: 0.3
            num_model_voxels_per_dim: 100
            gsg_class: ${monty.class:tbp.monty.frameworks.models.goal_state_generation.EvidenceGoalStateGenerator}
            gsg_args:
              goal_tolerances:
                location: 0.015
              elapsed_steps_factor: 10
              min_post_goal_success_steps: 5
              x_percent_scale_factor: 0.75
              desired_object_distance: 0.03
            hypotheses_updater_args:
              max_nneighbors: 10
          learning_module_class: ${monty.class:tbp.monty.frameworks.models.evidence_matching.learning_module.EvidenceGraphLM}
          tolerances: null
      sm_to_agent_dict:
        patch_0: ${monty.agent_id:agent_id_0}
        patch_1: ${monty.agent_id:agent_id_0}
        patch_2: ${monty.agent_id:agent_id_0}
        patch_3: ${monty.agent_id:agent_id_0}
        patch_4: ${monty.agent_id:agent_id_0}
        view_finder: ${monty.agent_id:agent_id_0}
      sm_to_lm_matrix:
      - - 0
      - - 1
      - - 2
      - - 3
      - - 4
      lm_to_lm_matrix: null
      lm_to_lm_vote_matrix:
      - - 1
        - 2
        - 3
        - 4
      - - 0
        - 2
        - 3
        - 4
      - - 0
        - 1
        - 3
        - 4
      - - 0
        - 1
        - 2
        - 4
      - - 0
        - 1
        - 2
        - 3
    env_interface_config:
      env_init_args:
        objects:
        - name: coneSolid
          position:
          - 0.0
          - 1.5
          - -0.1
        scene_id: null
        seed: 42
        data_path: ${path.expanduser:${oc.env:MONTY_DATA}/habitat/objects/ycb}
        agents:
          agent_args:
            agent_id: ${monty.agent_id:agent_id_0}
            sensor_ids:
            - patch_0
            - patch_1
            - patch_2
            - patch_3
            - patch_4
            - view_finder
            height: 0.0
            position:
            - 0.0
            - 1.5
            - 0.2
            resolutions:
            - - 64
              - 64
            - - 64
              - 64
            - - 64
              - 64
            - - 64
              - 64
            - - 64
              - 64
            - - 64
              - 64
            positions:
            - - 0.0
              - 0.0
              - 0.0
            - - 0.0
              - 0.01
              - 0.0
            - - 0.0
              - -0.01
              - 0.0
            - - 0.01
              - 0.0
              - 0.0
            - - -0.01
              - 0.0
              - 0.0
            - - 0.0
              - 0.0
              - 0.0
            rotations:
            - - 1.0
              - 0.0
              - 0.0
              - 0.0
            - - 1.0
              - 0.0
              - 0.0
              - 0.0
            - - 1.0
              - 0.0
              - 0.0
              - 0.0
            - - 1.0
              - 0.0
              - 0.0
              - 0.0
            - - 1.0
              - 0.0
              - 0.0
              - 0.0
            - - 1.0
              - 0.0
              - 0.0
              - 0.0
            semantics:
            - false
            - false
            - false
            - false
            - false
            - false
            zooms:
            - 10.0
            - 10.0
            - 10.0
            - 10.0
            - 10.0
            - 1.0
          agent_type: ${monty.class:tbp.monty.simulators.habitat.MultiSensorAgent}
      env_init_func: ${monty.class:tbp.monty.simulators.habitat.environment.HabitatEnvironment}
      transform:
      - _target_: tbp.monty.frameworks.environment_utils.transforms.MissingToMaxDepth
        agent_id: ${monty.agent_id:agent_id_0}
        max_depth: 1
      - _target_: tbp.monty.frameworks.environment_utils.transforms.DepthTo3DLocations
        agent_id: ${monty.agent_id:agent_id_0}
        sensor_ids:
        - patch_0
        - patch_1
        - patch_2
        - patch_3
        - patch_4
        - view_finder
        resolutions:
        - - 64
          - 64
        - - 64
          - 64
        - - 64
          - 64
        - - 64
          - 64
        - - 64
          - 64
        - - 64
          - 64
        world_coord: true
        zooms:
        - 10.0
        - 10.0
        - 10.0
        - 10.0
        - 10.0
        - 1.0
        get_all_points: true
        use_semantic_sensor: false
      rng: null
    eval_env_interface_args:
      parent_to_child_mapping: null
      object_names:
      - mug
      - bowl
      - potted_meat_can
      - master_chef_can
      - i_cups
      - spoon
      - b_cups
      - pitcher_base
      - knife
      - b_marbles
      - h_cups
      - strawberry
      - power_drill
      - padlock
      - golf_ball
      - hammer
      - softball
      - orange
      - c_lego_duplo
      - c_toy_airplane
      - b_lego_duplo
      - banana
      - nine_hole_peg_test
      - tomato_soup_can
      - baseball
      - g_cups
      - gelatin_box
      - lemon
      - plum
      - racquetball
      - plate
      - pudding_box
      - e_cups
      - apple
      - j_cups
      - foam_brick
      - large_marker
      - peach
      - phillips_screwdriver
      - a_toy_airplane
      - e_lego_duplo
      - sugar_box
      - a_colored_wood_blocks
      - c_cups
      - pear
      - f_cups
      - wood_block
      - d_lego_duplo
      - b_toy_airplane
      - b_colored_wood_blocks
      - g_lego_duplo
      - a_lego_duplo
      - mini_soccer_ball
      - medium_clamp
      - a_marbles
      - extra_large_clamp
      - d_cups
      - e_toy_airplane
      - adjustable_wrench
      - rubiks_cube
      - f_lego_duplo
      - a_cups
      - skillet_lid
      - sponge
      - tennis_ball
      - spatula
      - d_toy_airplane
      - chain
      - scissors
      - mustard_bottle
      - bleach_cleanser
      - tuna_fish_can
      - cracker_box
      - fork
      - large_clamp
      - dice
      - flat_screwdriver
      object_init_sampler:
        _target_: tbp.monty.frameworks.environments.object_init_samplers.RandomRotation
    eval_env_interface_class: ${monty.class:tbp.monty.frameworks.environments.embodied_data.InformedEnvironmentInterface}
  _target_: tbp.monty.frameworks.experiments.object_recognition_experiments.MontyObjectRecognitionExperiment
episodes: all
num_parallel: 16
print_cfg: false
quiet_habitat_logs: true
