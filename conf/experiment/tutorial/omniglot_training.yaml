defaults:
  - /experiment/config/supervised_pretraining@config
  - /experiment/config/logging/pretrain@config.logging
  - /experiment/config/monty/patch_and_view@config.monty_config
  - /experiment/config/monty/motor_system/clear_motor_system_config@config.monty_config
  - /experiment/config/monty/motor_system/informed_no_trans_step_s1@config.monty_config.motor_system_config
  - /experiment/config/monty/sensor_modules/clear_sensor_module_configs@config.monty_config
  - /experiment/config/environment/omniglot@config.env_interface_config
  - /experiment/config/environment_interface/omniglot@config.train_env_interface_args

_target_: tbp.monty.frameworks.experiments.pretraining_experiments.MontySupervisedObjectPretrainingExperiment
config:
  n_train_epochs: 1
  logging:
    output_dir: ${path.expanduser:${oc.env:MONTY_MODELS}/my_trained_models}
    run_name: omniglot_training
  monty_config:
    sensor_module_configs:
      sensor_module_0:
        sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.HabitatSM}
        sensor_module_args:
          sensor_module_id: patch
          features:
            - pose_vectors
            - pose_fully_defined
            - on_object
            - principal_curvatures_log
          save_raw_obs: false
          # Need to set this lower since curvature is generally lower
          pc1_is_pc2_threshold: 1
      sensor_module_1:
        sensor_module_class: ${monty.class:tbp.monty.frameworks.models.sensor_modules.Probe}
        sensor_module_args:
          sensor_module_id: view_finder
          save_raw_obs: false
  train_env_interface_class: ${monty.class:tbp.monty.frameworks.environments.embodied_data.OmniglotEnvironmentInterface}
  train_env_interface_args:
    # Train on the first version of each character (there are 20 drawings for each
    # character in each alphabet, here we see one of them). The default
    # OmniglotEnvironmentInterfaceArgs specify alphabets = [0, 0, 0, 1, 1, 1] and
    # characters = [1, 2, 3, 1, 2, 3]) so in the first episode we will see version 1
    # of character 1 in alphabet 0, in the next episode version 1 of character 2 in
    # alphabet 0, and so on.
    versions: [1, 1, 1, 1, 1, 1]
